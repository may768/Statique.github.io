<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Five-Number Summary & Box Plot</title>
  <link rel="stylesheet" href="css/boxplot-summary.css" />
</head>
<body>

  <header>
    <h1>Five-Number Summary & Box Plot Generator</h1>
    <nav><a href="index.html">&larr; Back to Tools</a></nav>
  </header>

  <main>
    <form id="boxplot-form">
      <label for="dataInput">Enter numbers (comma or space-separated):</label>
      <input type="text" id="dataInput" placeholder="e.g. 1, 3, 5, 7, 9" />
      <button type="submit">Generate Summary</button>
    </form>

    <section id="summary" style="display:none;">
      <h2>Five-Number Summary</h2>
      <div id="minResult"></div>
      <div id="q1Result"></div>
      <div id="medianResult"></div>
      <div id="q3Result"></div>
      <div id="maxResult"></div>
    </section>

    <section id="steps" style="display:none;">
      <h2>Step-by-Step Explanation</h2>
      <div id="summarySteps" class="step"></div>
    </section>

    <section id="boxplot" style="display:none;">
      <h2>Box Plot</h2>
      <canvas id="boxPlotCanvas" width="600" height="100"></canvas>
    </section>
  </main>

  <footer>
    &copy; 2025 Statique. All rights reserved.
  </footer>

  <script>
    document.getElementById('boxplot-form').addEventListener('submit', function (e) {
      e.preventDefault();

      const input = document.getElementById('dataInput').value.trim();
      const values = input.split(/[\s,]+/).map(Number).filter(x => !isNaN(x)).sort((a, b) => a - b);
      if (values.length < 5) return alert('Please enter at least 5 valid numbers.');

      const min = values[0];
      const max = values[values.length - 1];

      const median = calcMedian(values);
      const q1 = calcMedian(values.slice(0, Math.floor(values.length / 2)));
      const q3 = calcMedian(values.slice(Math.ceil(values.length / 2)));

      document.getElementById('summary').style.display = 'block';
      document.getElementById('steps').style.display = 'block';
      document.getElementById('boxplot').style.display = 'block';

      document.getElementById('minResult').innerHTML = `<strong>Minimum:</strong> ${min}`;
      document.getElementById('q1Result').innerHTML = `<strong>Q1:</strong> ${q1}`;
      document.getElementById('medianResult').innerHTML = `<strong>Median (Q2):</strong> ${median}`;
      document.getElementById('q3Result').innerHTML = `<strong>Q3:</strong> ${q3}`;
      document.getElementById('maxResult').innerHTML = `<strong>Maximum:</strong> ${max}`;

      document.getElementById('summarySteps').innerHTML = `
        <p>Sorted data: [${values.join(', ')}]</p>
        <p>Q1 is the median of lower half: <strong>${q1}</strong></p>
        <p>Median (Q2): <strong>${median}</strong></p>
        <p>Q3 is the median of upper half: <strong>${q3}</strong></p>
        <p>Min = <strong>${min}</strong>, Max = <strong>${max}</strong></p>
      `;

      drawBoxPlot(min, q1, median, q3, max);
    });

    function calcMedian(arr) {
      const mid = Math.floor(arr.length / 2);
      return arr.length % 2 === 0 ? (arr[mid - 1] + arr[mid]) / 2 : arr[mid];
    }

    function drawBoxPlot(min, q1, median, q3, max) {
      const canvas = document.getElementById('boxPlotCanvas');
      const ctx = canvas.getContext('2d');
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      const padding = 40;
      const width = canvas.width - 2 * padding;
      const height = canvas.height;
      const scale = width / (max - min);

      const xMin = padding + (min - min) * scale;
      const xQ1 = padding + (q1 - min) * scale;
      const xMed = padding + (median - min) * scale;
      const xQ3 = padding + (q3 - min) * scale;
      const xMax = padding + (max - min) * scale;

      // Draw box
      ctx.fillStyle = '#0057b8';
      ctx.fillRect(xQ1, height / 3, xQ3 - xQ1, height / 3);

      // Draw median line
      ctx.beginPath();
      ctx.moveTo(xMed, height / 3);
      ctx.lineTo(xMed, 2 * height / 3);
      ctx.strokeStyle = '#000';
      ctx.lineWidth = 2;
      ctx.stroke();

      // Draw whiskers
      ctx.beginPath();
      ctx.moveTo(xMin, height / 2);
      ctx.lineTo(xQ1, height / 2);
      ctx.moveTo(xQ3, height / 2);
      ctx.lineTo(xMax, height / 2);
      ctx.stroke();

      // Draw whisker caps
      [xMin, xMax].forEach(x => {
        ctx.beginPath();
        ctx.moveTo(x, height / 3);
        ctx.lineTo(x, 2 * height / 3);
        ctx.stroke();
      });
    }
  </script>
</body>
</html>
